---
import { Image } from "astro:assets";
import lavaPlanet from "../assets/lava-planet.png";
import Earth from "./planets/Earth.astro";
import Sun from "./planets/Sun.astro";
---

<style>
    .main-menu {
        transform-style: preserve-3d;
        perspective: 100em;
        position: relative;
    }

    .main-menu-item {
        width: 120px;
        vertical-align: middle;
        position: relative;
        transition: all 600ms ease-in;

        &.item-sun {
            width: 180px;
        }

        &.item-about {
            width: 120px;
            height: 120px;
            & > :global(.planet-container) {
                transform-origin: 0 0;
                scale: calc(1 / 500 * 120);
                transition: scale 150ms ease-in;
            }
            &.selected {
                height: 90vh;
                width: 90vh;
                right: 0;
                & > :global(.planet-container) {
                    --vh: calc(var(--vh, 1vh) * 90);
                    scale: calc(1 / 500 * var(--vh));
                }
            }
        }
    }
</style>

<nav class="main-menu flex items-center justify-around w-full h-full">
    <a href="#" class="main-menu-item item-about text-center" id="item-about">
        <span>About</span>
        <Earth />
    </a>
    <a href="#" class="main-menu-item item-sun">
        <Sun />
    </a>
    <a href="#" class="main-menu-item">
        <Image src={lavaPlanet} alt="Contact" />
    </a>
</nav>

<script>
    const items = document.querySelectorAll(".main-menu-item");
    items.forEach(item => {
        item.addEventListener('click', () => {
            items.forEach(el => {
                if (el !== item) {
                    el.classList.remove('selected');
                }
            });
            item.classList.add('selected');
        });
    });

    const resizeObserver = new ResizeObserver(() => {
        document.documentElement.style.setProperty(`--vh`, `${window.innerHeight / 100}px`);
    });

    resizeObserver.observe(document.documentElement);
</script>
